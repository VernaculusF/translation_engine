# Translation Engine

A modular translation pipeline library for Dart/Flutter with layered processing, data repositories, and rich debug info.

## Quick start

- Add this repository as a dependency or clone locally.
- Make sure you have Flutter installed.

### Minimal example (engine)

```dart path=null start=null
import 'package:translation_engine/src/core/translation_engine.dart';
import 'package:translation_engine/src/core/translation_context.dart';

Future<void> main() async {
  final engine = TranslationEngine.instance(reset: true);
  await engine.initialize(customDatabasePath: '/tmp/te_db');

  final result = await engine.translate(
    'Hello,   world!!!',
    sourceLanguage: 'en',
    targetLanguage: 'en',
    context: TranslationContext(sourceLanguage: 'en', targetLanguage: 'en', debugMode: true),
  );

  print(result.translatedText); // Cleaned and formatted
  await engine.dispose();
}
```

### Run samples

- Basic usage:
  - `dart run samples/basic_usage/main.dart`

- Populate dictionary/phrases then translate:
  - `dart run samples/data_population/populate_and_translate.dart`

### Tests

- Run analyzer: `flutter analyze`
- Run tests: `flutter test`

## Performance

- Benchmarks: `flutter test test/benchmarks/perf_benchmarks_test.dart`
- Generate JSON report: `flutter test test/benchmarks/perf_report_test.dart`
  - Output in `reports/performance/perf_report_*.json`

## Architecture

- Core
  - TranslationEngine ‚Äì high-level API
  - TranslationPipeline ‚Äì orchestrates layers
  - TranslationContext ‚Äì processing context
- Layers (adapters wired by default in engine)
  - PreProcessing ‚Üí PhraseLookup ‚Üí Dictionary ‚Üí Grammar ‚Üí WordOrder ‚Üí PostProcessing
- Data layer
  - DictionaryRepository, PhraseRepository, UserDataRepository

See CHECKLISTS/DEVELOPMENT_STAGES.md for roadmap and current status.

**–ó–∞–∫—Ä—ã—Ç–∞—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-–ø–µ—Ä–µ–≤–æ–¥–∞**

---

## üéØ **–ù–ê–ó–ù–ê–ß–ï–ù–ò–ï**

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω-–¥–≤–∏–∂–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–ª—è –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
1. **–ú–æ–±–∏–ª—å–Ω—ã–π –æ—Ñ—Ñ–ª–∞–π–Ω-–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫** - –±—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
2. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–Ω–∏–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

### **–ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞:**
1. **–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
2. **–§—Ä–∞–∑–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥** - –ø–æ–∏—Å–∫ –≥–æ—Ç–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–π  
3. **–°–ª–æ–≤–∞—Ä–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥** - –ø–µ—Ä–µ–≤–æ–¥ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤
4. **–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª
5. **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞** - –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤
6. **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è, –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è

### **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
- **Dart 3.0+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **Flutter** - –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å
- **SQLite** - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–π
- **In-memory –∫—ç—à** - –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üìÅ **–°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê**
lib/src/
‚îú‚îÄ‚îÄ core/ # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ –∏ –∫–æ–Ω–≤–µ–π–µ—Ä
‚îú‚îÄ‚îÄ layers/ # 6 —Å–ª–æ–µ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞
‚îú‚îÄ‚îÄ data/ # –†–∞–±–æ—Ç–∞ —Å –ë–î –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ models/ # Data-–∫–ª–∞—Å—Å—ã
‚îú‚îÄ‚îÄ utils/ # –£—Ç–∏–ª–∏—Ç—ã, –∫—ç—à, –ª–æ–≥–∏
‚îî‚îÄ‚îÄ adaptation/ # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

text

---

## üóÉÔ∏è **–î–ê–ù–ù–´–ï**

### **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

#### **1. dictionaries.db - –°–ª–æ–≤–∞—Ä–∏**
- **words** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–ª–æ–≤–∞—Ä–µ–π (`source_word` ‚Üí `target_word`)
- **word_cache** - LRU –∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–≤–æ–¥–∞–º
- –ò–Ω–¥–µ–∫—Å—ã –ø–æ `language_pair`, `frequency` –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### **2. phrases.db - –§—Ä–∞–∑—ã –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è**  
- **phrases** - –≥–æ—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Ñ—Ä–∞–∑ (`source_phrase` ‚Üí `target_phrase`)
- **phrase_cache** - –∫—ç—à —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—Ä–∞–∑
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

#### **3. user_data.db - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**
- **translation_history** - –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- **user_corrections** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **user_settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **user_translation_edits** - –ø—Ä–∞–≤–∫–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π –∞–ø–ø—Ä—É–≤–∞
- **context_cache** - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∫—ç—à –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### **–ü—Ä–∏–Ω—Ü–∏–ø—ã —Å—Ö–µ–º—ã –ë–î:**
- **`source_*`** - –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ (—á—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–∏–º)
- **`target_*`** - –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–≤–æ–¥–∞)
- **`language_pair`** - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "en-ru")

### **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:**
- OPUS, Wiktionary, Tatoeba, Apertium
- OpenRussian, Project Gutenberg

---

## üöÄ **–•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò**

- **–û—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞** - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- **–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞**: ~75-100MB
- **–í—Ä–µ–º—è –ø–µ—Ä–µ–≤–æ–¥–∞**: 20-50ms
- **–ü–∞–º—è—Ç—å**: 80-120MB RAM
- **–ö–∞—á–µ—Å—Ç–≤–æ**: 7.5/10 –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## üí∞ **–ë–ò–ó–ù–ï–°-–ú–û–î–ï–õ–¨**

**–ó–∞–∫—Ä—ã—Ç–∞—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞:**
- –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø—Ä–µ–º–∏—É–º-—Ñ—É–Ω–∫—Ü–∏–∏

---

## üìÖ **–ü–õ–ê–ù –†–ê–ó–†–ê–ë–û–¢–ö–ò**

**11 –Ω–µ–¥–µ–ª—å –¥–æ production-ready (–æ—Å—Ç–∞–ª–æ—Å—å 6-7 –Ω–µ–¥–µ–ª—å):**
1. ‚úÖ **–ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ë–î** (3 –Ω–µ–¥) - **–ó–ê–í–ï–†–®–ï–ù**
2. ‚úÖ **–Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã** (2 –Ω–µ–¥) - **–ó–ê–í–ï–†–®–ï–ù**
3. üîÑ **–°–ª–æ–∏ –ø–µ—Ä–µ–≤–æ–¥–∞** (3 –Ω–µ–¥) - **–¢–ï–ö–£–©–ò–ô –≠–¢–ê–ü**
4. üî¥ **–ö–∞—á–µ—Å—Ç–≤–æ –∏ –¥–∞–Ω–Ω—ã–µ** (2 –Ω–µ–¥)
5. üî¥ **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞** (1 –Ω–µ–¥)

---

## üîß **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°**

**‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–û (–≠–¢–ê–ü 1-2):**
- **Data System (100%)**: DatabaseManager, CacheManager, Repositories, Models
- **Core System (100%)**: TranslationEngine, TranslationPipeline, TranslationContext, EngineConfig
- **223+ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–∞** (–¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã)
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î** —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ (`source_*`/`target_*`)
- **1649+ —Å—Ç—Ä–æ–∫ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–¥–∞** —Å –ø–æ–ª–Ω—ã–º API

**üîÑ –ê–ö–¢–ò–í–ù–´–ô –≠–¢–ê–ü (–≠–¢–ê–ü 3):**
- **Translation Layers (0/6)**: –ù–∞—á–∏–Ω–∞–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é 6 —Å–ª–æ–µ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞

---

## üë®‚Äçüíª **–†–ê–ó–†–ê–ë–û–¢–ö–ê**

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ **—á–∏—Å—Ç–∞—è Flutter-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞** —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º:
- SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤
- Clean Code
- –ü–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏

---

**–í–µ—Ä—Å–∏—è: 0.0.1** | **–õ–∏—Ü–µ–Ω–∑–∏—è: –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è** | **–°—Ç–∞—Ç—É—Å: –í –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ**