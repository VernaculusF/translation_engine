# Translation Engine - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

> **–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
> **–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-10-29  
> **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞**: –†–∞–Ω–Ω—è—è —Å—Ç–∞–¥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (v0.0.12)

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
3. [–°–ª–æ–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏](#—Å–ª–æ–∏-–æ–±—Ä–∞–±–æ—Ç–∫–∏)
4. [–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö](#—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏-–¥–∞–Ω–Ω—ã—Ö)
5. [CLI –∏ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞](#cli-–∏-—Ç–æ—á–∫–∏-–≤—Ö–æ–¥–∞)
6. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
7. [–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–ø—Ä–∞–≤–∏–ª–∞-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#–∏–∑–≤–µ—Å—Ç–Ω—ã–µ-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
10. [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](#–¥–æ—Ä–æ–∂–Ω–∞—è-–∫–∞—Ä—Ç–∞)

---

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**translation_engine** (–ø–∞–∫–µ—Ç `fluent_translate`) ‚Äî –æ—Ñ—Ñ–ª–∞–π–Ω –¥–≤–∏–∂–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è Flutter/Dart —Å –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏ —Ñ–∞–π–ª–æ–≤—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö (JSONL). –ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –Ω–∞–∑—ã–≤–∞—Ç—å "–Ø–¥—Ä–æ".

### –ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

- **–û—Ñ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞**: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ–≤–∞—Ä–µ–π
- **–ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: 6 —Å–ª–æ–µ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- **JSONL-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ**: —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–ª–æ–≤–∞—Ä–µ–π, —Ñ—Ä–∞–∑ –∏ –ø—Ä–∞–≤–∏–ª
- **CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞, –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö —Å–ª–æ—ë–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ JSONL-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ CLI-–∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `dart run fluent_translate:translate_engine`
- ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä–Ω—ã–π –∑–∞–ø–∞—Å (—Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è)
- ‚ö†Ô∏è –£–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ (—Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)
- ‚ö†Ô∏è –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤—ã—Ö –ø–∞—Ä (en-ru –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
translation_engine/
‚îú‚îÄ‚îÄ bin/                          # CLI entry points
‚îÇ   ‚îú‚îÄ‚îÄ translate_engine.dart     # –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ CLI
‚îÇ   ‚îî‚îÄ‚îÄ commands/                 # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è CLI –∫–æ–º–∞–Ω–¥
‚îÇ       ‚îú‚îÄ‚îÄ db_command.dart       # –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–æ–≤–∞—Ä–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ import_command.dart   # –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îú‚îÄ‚îÄ export_command.dart   # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îú‚îÄ‚îÄ validate_command.dart # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ metrics_command.dart  # –ú–µ—Ç—Ä–∏–∫–∏ –¥–≤–∏–∂–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ config_command.dart   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ logs_command.dart     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏
‚îÇ       ‚îú‚îÄ‚îÄ cache_command.dart    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
‚îÇ       ‚îú‚îÄ‚îÄ queue_command.dart    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–∏
‚îÇ       ‚îî‚îÄ‚îÄ engine_command.dart   # –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ fluent_translate.dart     # –ü—É–±–ª–∏—á–Ω—ã–π API
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ core/                 # –Ø–¥—Ä–æ –¥–≤–∏–∂–∫–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ translation_engine.dart       # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –¥–≤–∏–∂–∫–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ translation_pipeline.dart     # Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ—ë–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ translation_context.dart      # –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–æ–¥–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ engine_config.dart            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ layer_adapters.dart           # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è —Å–ª–æ—ë–≤
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ layers/               # –°–ª–æ–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ (6 —Å–ª–æ—ë–≤)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ base_translation_layer.dart    # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å–ª–æ—è
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ pre_processing_layer.dart      # –°–ª–æ–π 1: –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ phrase_translation_layer.dart  # –°–ª–æ–π 2: –§—Ä–∞–∑—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dictionary_layer.dart          # –°–ª–æ–π 3: –°–ª–æ–≤–∞—Ä—å
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ grammar_layer.dart             # –°–ª–æ–π 4: –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ word_order_layer.dart          # –°–ª–æ–π 5: –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ post_processing_layer.dart     # –°–ª–æ–π 6: –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ data/                 # Data Layer (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ base_repository.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ database_manager.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dictionary_repository.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ phrase_repository.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ user_data_repository.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ grammar_rules_repository.dart
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ word_order_rules_repository.dart
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ post_processing_rules_repository.dart
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ translation_result.dart
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ layer_debug_info.dart
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ utils/                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ cache_manager.dart       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º (LRU+TTL)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ config_manager.dart      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ debug_logger.dart        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ metrics.dart             # –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ tracing.dart             # –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ rate_limiter.dart        # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ exceptions.dart          # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ integrity_checker.dart   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ storage/              # –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ file_storage.dart
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ tools/                # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞
‚îÇ           ‚îú‚îÄ‚îÄ dictionary_importer.dart
‚îÇ           ‚îî‚îÄ‚îÄ phrase_importer.dart
‚îÇ
‚îú‚îÄ‚îÄ test/                         # –¢–µ—Å—Ç—ã (82 .dart —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ unit/                     # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ integration/              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ layers/                   # –¢–µ—Å—Ç—ã —Å–ª–æ—ë–≤
‚îÇ   ‚îú‚îÄ‚îÄ e2e/                      # End-to-end —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ benchmarks/               # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚îÇ
‚îî‚îÄ‚îÄ docs/                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ DEVELOPER_GUIDE.md        # –≠—Ç–æ—Ç —Ñ–∞–π–ª
    ‚îú‚îÄ‚îÄ DEVELOPMENT_STAGES.md     # –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
    ‚îú‚îÄ‚îÄ cli_commands_ru.md        # –°–ø—Ä–∞–≤–∫–∞ –ø–æ CLI
    ‚îú‚îÄ‚îÄ core_audit_ru.md          # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç
    ‚îú‚îÄ‚îÄ core_changes_ru.md        # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
    ‚îî‚îÄ‚îÄ usage_ru.md               # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–≤–∏–∂–∫–∞

```dart
// 1. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
final engine = TranslationEngine();
await engine.initialize(
  customDatabasePath: './translation_data',
  config: {
    'cache': {'words_limit': 10000, 'ttl_seconds': 3600},
    'debug': true,
    'log_level': 'info',
  },
);

// 2. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
final result = await engine.translate(
  'Hello, world!',
  sourceLanguage: 'en',
  targetLanguage: 'ru',
);

// 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
if (result.hasError) {
  print('Error: ${result.errorMessage}');
} else {
  print('Translation: ${result.translatedText}');
  print('Confidence: ${result.confidence}');
}

// 4. –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
await engine.dispose();
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–≤–∏–∂–∫–∞

```
uninitialized ‚Üí initializing ‚Üí ready ‚áÑ processing
                                 ‚Üì
                               error (recoverable via reset())
                                 ‚Üì
                             disposing ‚Üí disposed
```

---

## üîÑ –°–ª–æ–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

–î–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **6 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ—ë–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏**. –ö–∞–∂–¥—ã–π —Å–ª–æ–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `BaseTranslationLayer` –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `TranslationLayer`.

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ—ë–≤

| # | –°–ª–æ–π | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|------|-----------|------------|--------|
| 1 | **PreProcessingLayer** | 0 | –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è, –æ—á–∏—Å—Ç–∫–∞ HTML/Markdown | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| 2 | **PhraseTranslationLayer** | 100 | –ü–æ–∏—Å–∫ –≥–æ—Ç–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Ñ—Ä–∞–∑/–∏–¥–∏–æ–º | ‚úÖ –ë–∞–∑–æ–≤—ã–π n-gram —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω |
| 3 | **DictionaryLayer** | 200 | –ü–µ—Ä–µ–≤–æ–¥ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤ —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| 4 | **GrammarLayer** | 300 | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª | ‚ö†Ô∏è –£–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ |
| 5 | **WordOrderLayer** | 400 | –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —Ü–µ–ª–µ–≤–æ–º—É —è–∑—ã–∫—É | ‚ö†Ô∏è –ë–∞–∑–æ–≤—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ |
| 6 | **PostProcessingLayer** | 500 | –ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è, –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚ö†Ô∏è –≠–≤—Ä–∏—Å—Ç–∏–∫–∏, —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π |

### –î–µ—Ç–∞–ª–∏ —Å–ª–æ—ë–≤

#### 1. PreProcessingLayer (–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û—á–∏—Å—Ç–∫–∞ HTML —Ç–µ–≥–æ–≤ –∏ Markdown —Ä–∞–∑–º–µ—Ç–∫–∏
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è Unicode (NFC)
- –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å–ª–æ–≤–∞, —á–∏—Å–ª–∞, –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é, whitespace
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤ (word, number, punctuation, email, url, hashtag, mention)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª–æ—ë–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∞—Ç–∏–Ω–∏—Ü—É, –∫–∏—Ä–∏–ª–ª–∏—Ü—É, CJK —Å–∏–º–≤–æ–ª—ã
- –°–æ–∑–¥–∞—ë—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ `preprocessing_tokens` –∏ `token_count`
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç `context.tokens` —Å–ø–∏—Å–∫–æ–º –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤

**–í–∞–∂–Ω–æ:** –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ —ç—Ç–æ–≥–æ —Å–ª–æ—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏.

#### 2. PhraseTranslationLayer (–§—Ä–∞–∑–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- Exact lookup: –ø–æ–∏—Å–∫ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã –≤ `PhraseRepository`
- N-gram matching: –ø–æ–∏—Å–∫ –±–∏–≥—Ä–∞–º–º (2 —Å–ª–æ–≤–∞) –∏ —Ç—Ä–∏–≥—Ä–∞–º–º (3 —Å–ª–æ–≤–∞)
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑ –Ω–∞–¥ –∫–æ—Ä–æ—Ç–∫–∏–º–∏
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ü–æ–ø—ã—Ç–∫–∞ —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤—Å–µ–π —Ñ—Ä–∞–∑—ã
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–≥—Ä–∞–º–º –∏ —Ç—Ä–∏–≥—Ä–∞–º–º –∏–∑ —Ç–æ–∫–µ–Ω–æ–≤
3. –ü–æ–∏—Å–∫ –∫–∞–∂–¥–æ–π n-–≥—Ä–∞–º–º—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
4. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑ –ø–æ –¥–ª–∏–Ω–µ (–¥–ª–∏–Ω–Ω—ã–µ –ø–µ—Ä–≤—ã–µ)
5. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–±–µ–∑ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π)
6. –ó–∞–º–µ–Ω–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑ –≤ —Ç–µ–∫—Å—Ç–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–∑—ã: 2 —Å–ª–æ–≤–∞
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ñ—Ä–∞–∑—ã: 8 —Å–ª–æ–≤
- Confidence –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏–Ω—ã –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

#### 3. DictionaryLayer (–°–ª–æ–≤–∞—Ä–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü–µ—Ä–µ–≤–æ–¥ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤ —á–µ—Ä–µ–∑ `DictionaryRepository`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –ª—É—á—à–µ–≥–æ
- –£—á—ë—Ç —á–∞—Å—Ç–æ—Ç–Ω–æ—Å—Ç–∏ —Å–ª–æ–≤
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (`context.forceTranslations`)
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è —Å–ª–æ–≤ –∏–∑ –ø–µ—Ä–µ–≤–æ–¥–∞ (`context.excludeWords`)

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ `PreProcessingLayer`
2. Fallback-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞—Ä–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
   - –ü–æ–∏—Å–∫ –≤ —Å–ª–æ–≤–∞—Ä–µ –ø–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Ñ–æ—Ä–º–µ
   - –í—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø–æ confidence/frequency)
4. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–±–µ–ª–æ–≤/–ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∞—Ç–∏–Ω–∏—Ü—É, –∫–∏—Ä–∏–ª–ª–∏—Ü—É, CJK
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è confidence –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è: 0.3
- –ú–∞–∫—Å–∏–º—É–º 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ —Å–ª–æ–≤–æ

#### 4. GrammarLayer (–ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª
- –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –æ–∫–æ–Ω—á–∞–Ω–∏–π, –∞—Ä—Ç–∏–∫–ª–µ–π, –≥–ª–∞–≥–æ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ä–æ–¥–∞, —á–∏—Å–ª–∞, –ø–∞–¥–µ–∂–∞

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –£–ø—Ä–æ—â—ë–Ω–Ω—ã–µ regex-–ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `GrammarRulesRepository`
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–∞–º–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–∞–≤–∏–ª–∞ —É–ø—Ä–æ—â–µ–Ω—ã –¥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ regex/replacement –≤—ã–≥–ª—è–¥—è—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç schema validation –ø—Ä–∞–≤–∏–ª
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–ü–ª–∞–Ω—ã:**
- –í—ã–Ω–µ—Å–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –≤–æ –≤–Ω–µ—à–Ω–∏–µ JSONL —Ñ–∞–π–ª—ã
- Schema validation
- –Ø–∑—ã–∫-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏

#### 5. WordOrderLayer (–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —Å–ª–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ —Ü–µ–ª–µ–≤–æ–º—É —è–∑—ã–∫—É
- –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö, –≥–ª–∞–≥–æ–ª–æ–≤, —á–∞—Å—Ç–∏—Ü

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ë–∞–∑–æ–≤—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –∏–∑ `WordOrderRulesRepository`
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ä–∏c–∫–æ–≤–∞–Ω–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –ù–µ—Ç —É—á—ë—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- –ú–æ–∂–µ—Ç –≤–Ω–æ—Å–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö

**–ü–ª–∞–Ω—ã:**
- –Ø–∑—ã–∫-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –£—á—ë—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞
- –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞

#### 6. PostProcessingLayer (–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–≤–æ–π –±—É–∫–≤—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏
- –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–≤—ã—á–µ–∫

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –≠–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏/–ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –∏–∑ `PostProcessingRulesRepository`

**‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ú–æ–∂–µ—Ç –ø–æ—Ä—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç—ã –¥–ª—è –Ω–µ–ª–∞—Ç–∏–Ω—Å–∫–∏—Ö —è–∑—ã–∫–æ–≤
- –ù–∞–≤—è–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É —Ç–∞–º, –≥–¥–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
- –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–∞–≤—ã—á–∫–∞–º–∏, NBSP (–æ—Å–æ–±–µ–Ω–Ω–æ FR/ES)

**–ü–ª–∞–Ω—ã:**
- –Ø–∑—ã–∫-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —à–∞–≥–æ–≤
- –£—á—ë—Ç —Ç–∏–ø–∞ —Ç–µ–∫—Å—Ç–∞ (–≤–æ–ø—Ä–æ—Å, –≤–æ—Å–∫–ª–∏—Ü–∞–Ω–∏–µ, —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)

### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å–ª–æ—è

–í—Å–µ —Å–ª–æ–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç `BaseTranslationLayer`:

```dart
abstract class BaseTranslationLayer {
  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–ª–æ—è
  String get name;                    // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è
  String get description;             // –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
  LayerPriority get priority;         // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  String get version => '1.0.0';      // –í–µ—Ä—Å–∏—è —Å–ª–æ—è
  
  // –ú–µ—Ç–æ–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
  bool canHandle(String text, TranslationContext context);
  Future<LayerResult> process(String text, TranslationContext context);
  bool validateInput(String text, TranslationContext context);
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
  Future<LayerResult> processWithMetrics(String text, TranslationContext context);
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  Map<String, dynamic> get statistics;
  void resetStatistics();
  Map<String, dynamic> getLayerInfo();
}
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–ª–æ—ë–≤

–°–ª–æ–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ `TranslationPipeline` —á–µ—Ä–µ–∑ `LayerAdaptersFactory`:

–ò–Ω—Ç–µ—Ä‚Äë—Å–ª–æ–π–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–≤–∞–∂–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞):
- Phrase ‚Üí Dictionary: —Ñ—Ä–∞–∑–æ–≤—ã–π —Å–ª–æ–π –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `phrase_protected_ranges` –∏ `phrase_applied=true` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç; —Å–ª–æ–≤–∞—Ä—å –æ–±—è–∑–∞–Ω —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç –∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —ç—Ç–∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã
- Encoding: —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —á–∏—Ç–∞—é—Ç JSONL —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º BOM (UTF‚Äë8/UTF‚Äë16 LE/BE) –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ \n/\r\n/\r
- Rules placeholders: Grammar/WordOrder/PostProcessing –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ `$1`, `$2`, `${n}` –≤ replacement/—à–∞–±–ª–æ–Ω–∞—Ö; ¬´—Å—ã—Ä—ã–µ¬ª `$` –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª
- Phrase lookup: –ø–æ–º–∏–º–æ exact/loose –µ—Å—Ç—å –∏–Ω–¥–µ–∫—Å "words-only" (–±–µ–∑ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏) –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏–∑ n‚Äëgram —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏

```dart
// –í _initializeDefaultLayers():
registerLayer(LayerAdaptersFactory.preProcessing());
registerLayer(LayerAdaptersFactory.phraseLookup(repo: phraseRepository));
registerLayer(LayerAdaptersFactory.dictionary(repo: dictionaryRepository));
registerLayer(LayerAdaptersFactory.grammar(repo: grammarRulesRepository));
registerLayer(LayerAdaptersFactory.wordOrder(repo: wordOrderRulesRepository));
registerLayer(LayerAdaptersFactory.postProcessing(repo: postProcessingRulesRepository));
```

---

## üíæ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç `BaseRepository` –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç JSONL-—Ñ–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
translation_data/
‚îú‚îÄ‚îÄ en-ru/                          # –Ø–∑—ã–∫–æ–≤–∞—è –ø–∞—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ dictionary.jsonl            # –°–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ phrases.jsonl               # –§—Ä–∞–∑—ã –∏ –∏–¥–∏–æ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ grammar_rules.jsonl         # –ì—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îú‚îÄ‚îÄ word_order_rules.jsonl      # –ü—Ä–∞–≤–∏–ª–∞ –ø–æ—Ä—è–¥–∫–∞ —Å–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ post_processing_rules.jsonl # –ü—Ä–∞–≤–∏–ª–∞ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ version.json                # –í–µ—Ä—Å–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ ru-en/                          # –î—Ä—É–≥–∏–µ —è–∑—ã–∫–æ–≤—ã–µ –ø–∞—Ä—ã...
‚îî‚îÄ‚îÄ user/                           # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    ‚îú‚îÄ‚îÄ translation_history.jsonl
    ‚îú‚îÄ‚îÄ user_settings.json
    ‚îî‚îÄ‚îÄ user_translation_edits.jsonl
```

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

#### DictionaryRepository

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ —Å–ª–æ–≤.

**–§–æ—Ä–º–∞—Ç JSONL –∑–∞–ø–∏—Å–∏:**
```json
{"source":"hello","target":"–ø—Ä–∏–≤–µ—Ç","lang":"en-ru","confidence":95,"frequency":1000,"pos":"interjection"}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getTranslation(word, langPair)` - –ø–æ–∏—Å–∫ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–ª–æ–≤–∞
- `getTranslations(word, langPair)` - –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–∞
- `addTranslation(...)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (deprecated, use bulk)
- `bulkUpsertTranslations([...])` - –ø–∞–∫–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `searchTranslations(query, langPair)` - –ø–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–∏—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é

**–ò–Ω–¥–µ–∫—Å—ã:** In-memory –∏–Ω–¥–µ–∫—Å `bySource` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Å–ª–æ–≤—É.

#### PhraseRepository

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—Ä–∞–∑–æ–≤—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –∏ –∏–¥–∏–æ–º–∞–º–∏.

**–§–æ—Ä–º–∞—Ç JSONL –∑–∞–ø–∏—Å–∏:**
```json
{"source":"good morning","target":"–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ","lang":"en-ru","confidence":98,"type":"greeting","category":"greetings"}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getPhraseTranslation(phrase, langPair)` - —Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ—Ä–∞–∑—ã
- `searchPhrases(query, langPair)` - –ø–æ–∏—Å–∫ —Ñ—Ä–∞–∑
- `addPhrase(...)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—Ä–∞–∑—ã (deprecated, use bulk)
- `bulkUpsertPhrases([...])` - –ø–∞–∫–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ò–Ω–¥–µ–∫—Å—ã:** In-memory –∏–Ω–¥–µ–∫—Å `bySource` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ñ—Ä–∞–∑.

#### UserDataRepository

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤, –ø—Ä–∞–≤–æ–∫.

**–§–∞–π–ª—ã:**
- `translation_history.jsonl` - –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- `user_settings.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user_translation_edits.jsonl` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `saveTranslationHistory(result)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- `getUserSettings()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `saveUserSettings(settings)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `getUserEdit(source, langPair)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∫–∏
- `saveUserEdit(...)` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∫–∏

#### GrammarRulesRepository, WordOrderRulesRepository, PostProcessingRulesRepository

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–æ—ë–≤.

**–§–æ—Ä–º–∞—Ç JSONL –∑–∞–ø–∏—Å–∏ (–ø—Ä–∏–º–µ—Ä grammar):**
```json
{"lang":"en-ru","pattern":"\\bis\\b","replacement":"–µ—Å—Ç—å","priority":10,"description":"verb to be"}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `getRules(langPair)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –¥–ª—è —è–∑—ã–∫–æ–≤–æ–π –ø–∞—Ä—ã

### –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏

#### –ü–∞–∫–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å (Bulk Operations)

**‚ùó–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ —Ü–∏–∫–ª–æ–≤ —Å –µ–¥–∏–Ω–∏—á–Ω—ã–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏.

```dart
// ‚ùå –ü–õ–û–•–û: O(n¬≤) —Å–ª–æ–∂–Ω–æ—Å—Ç—å
for (final word in words) {
  await repo.addTranslation(word.source, word.target, ...);
}

// ‚úÖ –•–û–†–û–®–û: O(n) —Å–ª–æ–∂–Ω–æ—Å—Ç—å
await repo.bulkUpsertTranslations(words.map((w) => {
  'source': w.source,
  'target': w.target,
  'lang': langPair,
  'confidence': w.confidence,
}).toList());
```

#### –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å

–í—Å–µ bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç atomic write (tmp + rename):

1. –ó–∞–ø–∏—Å—å –≤ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª `{file}.tmp`
2. Atomic rename `{file}.tmp` ‚Üí `{file}`
3. Best-effort file lock (`{file}.lock`)

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `CacheManager` —Å –¥–≤—É–º—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏:

- **Generic cache**: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π LRU+TTL –∫—ç—à –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- **In-memory indexes**: –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ (bySource)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫—ç—à–∞:**
```dart
config: {
  'cache': {
    'words_limit': 10000,       // –õ–∏–º–∏—Ç —Å–ª–æ–≤–∞—Ä–Ω–æ–≥–æ –∫—ç—à–∞
    'phrases_limit': 5000,      // –õ–∏–º–∏—Ç —Ñ—Ä–∞–∑–æ–≤–æ–≥–æ –∫—ç—à–∞
    'ttl_seconds': 3600,        // TTL (–≤—Ä–µ–º—è –∂–∏–∑–Ω–∏) –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  }
}
```

---

## üîß CLI –∏ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞

### –ó–∞–ø—É—Å–∫ CLI

–ò–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
dart run fluent_translate:translate_engine <command> [options]
```

–õ–æ–∫–∞–ª—å–Ω–æ (–≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞):
```bash
dart run bin/translate_engine.dart <command> [options]
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### db - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ª–æ–≤–∞—Ä–µ–π

```bash
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –ø–∞—Ä
dart run fluent_translate:translate_engine db --list

# –ó–∞–≥—Ä—É–∑–∫–∞ en-ru –≤ ./translation_data
dart run fluent_translate:translate_engine db --lang=en-ru --db=./translation_data

# –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞—Ä
dart run fluent_translate:translate_engine db --db=./translation_data

# –û–ø—Ü–∏–∏:
# --lang=<xx-yy>        –Ø–∑—ã–∫–æ–≤–∞—è –ø–∞—Ä–∞
# --db=<dir>            –ü—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö
# --source=<url>        –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π HTTPS-–∏—Å—Ç–æ—á–Ω–∏–∫
# --force               –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
# --sha256=<prefix>     –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ SHA-256
# --allow-any-source    –†–∞–∑—Ä–µ—à–∏—Ç—å –ª—é–±—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–æ–ª—å–∫–æ github*)
# --dry-run             –ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ
```

#### import - –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```bash
dart run fluent_translate:translate_engine import \
  --file=./data/dict.jsonl \
  --lang=en-ru \
  --db=./translation_data

# –û–ø—Ü–∏–∏:
# --file=<path>   –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É (CSV/JSON/JSONL)
# --lang=<pair>   –Ø–∑—ã–∫–æ–≤–∞—è –ø–∞—Ä–∞
# --db=<dir>      –ü—É—Ç—å –∫ –ë–î
# --type=<type>   –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö (dict/phrases)
```

#### export - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```bash
dart run fluent_translate:translate_engine export \
  --type=dict \
  --lang=en-ru \
  --out=./output

# –û–ø—Ü–∏–∏:
# --type=<type>   –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö (dict/phrases)
# --lang=<pair>   –Ø–∑—ã–∫–æ–≤–∞—è –ø–∞—Ä–∞
# --out=<dir>     –í—ã—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```

#### validate - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```bash
dart run fluent_translate:translate_engine validate --db=./translation_data
```

#### metrics - –ú–µ—Ç—Ä–∏–∫–∏ –¥–≤–∏–∂–∫–∞

```bash
dart run fluent_translate:translate_engine metrics --db=./translation_data
```

–í—ã–≤–æ–¥–∏—Ç:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–≤–∏–∂–∫–∞ (–ø–µ—Ä–µ–≤–æ–¥—ã, –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- –ú–µ—Ç—Ä–∏–∫–∏ –∫—ç—à–∞ (hits, misses, —Ä–∞–∑–º–µ—Ä)
- –û—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤
- –¢–∞–π–º–∞—É—Ç—ã
- –ú–µ—Ç—Ä–∏–∫–∏ —Å–ª–æ—ë–≤

#### config - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
dart run fluent_translate:translate_engine config show

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞
dart run fluent_translate:translate_engine config set --file=engine_config.json
```

#### logs - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
dart run fluent_translate:translate_engine logs level info

# –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
dart run fluent_translate:translate_engine logs enable

# –í—ã–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
dart run fluent_translate:translate_engine logs disable

# –£—Ä–æ–≤–Ω–∏: error | warn | info | debug
```

#### cache - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
dart run fluent_translate:translate_engine cache stats

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
dart run fluent_translate:translate_engine cache clear all
dart run fluent_translate:translate_engine cache clear words
dart run fluent_translate:translate_engine cache clear phrases
```

#### queue - –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏

```bash
dart run fluent_translate:translate_engine queue stats
```

#### engine - –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–∫–∞

```bash
# –ú—è–≥–∫–∏–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
dart run fluent_translate:translate_engine engine reset
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```dart
final config = {
  // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
  'cache': {
    'words_limit': 10000,           // –õ–∏–º–∏—Ç —Å–ª–æ–≤–∞—Ä–Ω–æ–≥–æ –∫—ç—à–∞
    'phrases_limit': 5000,          // –õ–∏–º–∏—Ç —Ñ—Ä–∞–∑–æ–≤–æ–≥–æ –∫—ç—à–∞
    'ttl_seconds': 3600,            // TTL –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  },
  
  // –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  'debug': true,                    // –í–∫–ª—é—á–∏—Ç—å debug-—Ä–µ–∂–∏–º
  'log_level': 'info',              // error|warn|info|debug
  
  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  'security': {
    'rate_limiting': true,          // –í–∫–ª—é—á–∏—Ç—å rate limiting
    'max_requests_per_minute': 60,  // –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
  },
  
  // –û—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤
  'queue': {
    'max_pending': 100,             // –ú–∞–∫—Å. –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏ (0 = unlimited)
  },
  
  // –¢–∞–π–º–∞—É—Ç—ã
  'timeouts': {
    'translate_ms': 5000,           // –¢–∞–π–º–∞—É—Ç –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –º—Å
  },
  
  // –†–µ–∂–∏–º –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏
  'degrade': {
    'enabled': false,               // –í–∫–ª—é—á–∏—Ç—å degrade-—Ä–µ–∂–∏–º
    'allowed_layers': [             // –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Å–ª–æ–∏ –≤ degrade
      'phraseLookup',
      'dictionary',
    ],
  },
  
  // –ö–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
  'quality': {
    'min_confidence': 0.3,
    'prefer_exact_matches': true,
  },
};

await engine.initialize(config: config);
```

### Degrade-—Ä–µ–∂–∏–º

–†–µ–∂–∏–º –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –Ω–∞–±–æ—Ä —Å–ª–æ—ë–≤ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏–ª–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è:

```dart
config: {
  'degrade': {
    'enabled': true,
    'allowed_layers': ['phraseLookup', 'dictionary'],
  }
}
```

–í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Å–ª–æ–∏ —Ñ—Ä–∞–∑ –∏ —Å–ª–æ–≤–∞—Ä—è, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø—É—â–µ–Ω—ã.

### –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```dart
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
final metrics = engine.getMetrics();
print(metrics);

// –í—ã–≤–æ–¥:
// {
//   'engine': {...},          // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–≤–∏–∂–∫–∞
//   'cache': {...},           // –ú–µ—Ç—Ä–∏–∫–∏ –∫—ç—à–∞
//   'queue': {...},           // –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏
//   'timeouts': {...},        // –¢–∞–π–º–∞—É—Ç—ã
//   'logging': {...},         // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤
//   'metrics': {...},         // –ú–µ—Ç—Ä–∏–∫–∏ —Å–ª–æ—ë–≤
// }
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ JSON-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `DebugLogger`:

```dart
// –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
DebugLogger.instance.setEnabled(true);
DebugLogger.instance.setLevel(LogLevel.info);
DebugLogger.instance.setStructured(true);
```

–õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ stdout –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
```json
{"level":"info","msg":"translate.start","trace_id":"abc123","lang_pair":"en-ru","queued":0}
{"level":"debug","msg":"layer.start","trace_id":"abc123","layer":"dictionary"}
{"level":"info","msg":"translate.end","trace_id":"abc123","processing_time_ms":45}
```

### –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `trace_id` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

```dart
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ translate()
final traceId = newTraceId();  // UUID v4

// –î–æ—Å—Ç—É–ø–µ–Ω –≤ –ª–æ–≥–∞—Ö –∏ –º–µ—Ç—Ä–∏–∫–∞—Ö
context.setMetadata('trace_id', traceId);
```

---

## üìê –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°–æ–±–ª—é–¥–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**‚ùó–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
1. **OOP –ø—Ä–∏–Ω—Ü–∏–ø—ã**: –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
2. **SOLID**: Single Responsibility, Open/Closed, Liskov Substitution, Interface Segregation, Dependency Inversion
3. **–ù–µ –Ω–∞—Ä—É—à–∞—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∫–æ–¥–∞**: –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å `flutter analyze` –±–µ–∑ –æ—à–∏–±–æ–∫

### Flutter Analyze

**–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞–π—Ç–µ:**
```bash
flutter analyze
```

–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.

### –°—Ç–∏–ª—å –∫–æ–¥–∞

1. **Dart style guide**: —Å–ª–µ–¥—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º—É —Å—Ç–∏–ª—é Dart
2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º** –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. **Dartdoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (///)** –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ API –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
4. **–û—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞**: –∫–ª–∞—Å—Å–æ–≤, –º–µ—Ç–æ–¥–æ–≤, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–ª–æ—è

1. –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `BaseTranslationLayer`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã:
   - `name`, `description`, `priority`
   - `canHandle(text, context)`
   - `process(text, context)`
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `LayerAdaptersFactory`
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ `test/layers/`
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

–ü—Ä–∏–º–µ—Ä:
```dart
class MyCustomLayer extends BaseTranslationLayer {
  @override
  String get name => 'MyCustomLayer';
  
  @override
  String get description => 'Custom processing logic';
  
  @override
  LayerPriority get priority => LayerPriority.grammar; // or custom value
  
  @override
  bool canHandle(String text, TranslationContext context) {
    // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    return text.isNotEmpty;
  }
  
  @override
  Future<LayerResult> process(String text, TranslationContext context) async {
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    final processedText = myProcessingLogic(text);
    
    return LayerResult.success(
      processedText: processedText,
      confidence: 0.8,
      debugInfo: _createDebugInfo(...),
    );
  }
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `BaseRepository`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç JSONL-–∑–∞–ø–∏—Å–µ–π
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞/–¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è
4. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `bulkUpsert` –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∑–∞–ø–∏—Å–∏
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CacheManager` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
6. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ `test/unit/data/`

### –†–∞–±–æ—Ç–∞ —Å JSONL

```dart
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å
await storage.rewriteJsonLines(
  langPair,
  fileName,
  entries.map((e) => jsonEncode(e)).toList(),
  lock: true,  // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å file lock
);

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–ø–∏—Å—å –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
final file = File(path);
file.writeAsStringSync(data); // –ù–µ –∞—Ç–æ–º–∞—Ä–Ω–æ, –Ω–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
```

### Unicode –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

**‚ùó–í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É–π—Ç–µ Unicode —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–ª—é—á–∞–º–∏:

```dart
import 'package:unorm_dart/unorm_dart.dart' as unorm;

final normalized = unorm.nfc(text.toLowerCase());
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤ —Å –¥–∏–∞–∫—Ä–∏—Ç–∏–∫–æ–π.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ typed exceptions**: `EngineInitializationException`, `EngineStateException`, `LayerException`
2. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏** —á–µ—Ä–µ–∑ `DebugLogger`
3. **–í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ graceful results** –≤–º–µ—Å—Ç–æ –±—Ä–æ—Å–∞–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Å–ª–æ—è—Ö:
   ```dart
   return LayerResult.error(
     originalText: text,
     errorMessage: 'Detailed error message',
     debugInfo: _createDebugInfo(...),
   );
   ```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
2. **Integration —Ç–µ—Å—Ç—ã** –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. **Layer —Ç–µ—Å—Ç—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
4. **E2E —Ç–µ—Å—Ç—ã** –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
5. **Benchmarks** –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
flutter test

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
flutter test test/layers/dictionary_layer_test.dart

# –ë–µ–Ω—á–º–∞—Ä–∫–∏
flutter test test/benchmarks/
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –æ–±–Ω–æ–≤–ª—è–π—Ç–µ:
1. –≠—Ç–æ—Ç —Ñ–∞–π–ª (`DEVELOPER_GUIDE.md`)
2. `core_changes_ru.md` (–∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)
3. `usage_ru.md` (–µ—Å–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è API)
4. `CHANGELOG.md` (–¥–ª—è —Ä–µ–ª–∏–∑–æ–≤)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
test/
‚îú‚îÄ‚îÄ unit/                  # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ core/              # –¢–µ—Å—Ç—ã —è–¥—Ä–∞ (engine, pipeline, context)
‚îÇ   ‚îú‚îÄ‚îÄ data/              # –¢–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç
‚îÇ
‚îú‚îÄ‚îÄ integration/           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ data_layer_integration_test.dart
‚îÇ
‚îú‚îÄ‚îÄ layers/                # –¢–µ—Å—Ç—ã —Å–ª–æ—ë–≤
‚îÇ   ‚îú‚îÄ‚îÄ pre_processing_layer_test.dart
‚îÇ   ‚îú‚îÄ‚îÄ phrase_exact_lookup_test.dart
‚îÇ   ‚îú‚îÄ‚îÄ dictionary_single_letter_test.dart
‚îÇ   ‚îú‚îÄ‚îÄ grammar_layer_test.dart
‚îÇ   ‚îú‚îÄ‚îÄ word_order_layer_test.dart
‚îÇ   ‚îî‚îÄ‚îÄ post_processing_layer_test.dart
‚îÇ
‚îú‚îÄ‚îÄ e2e/                   # End-to-end —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ pipeline_e2e_test.dart
‚îÇ
‚îú‚îÄ‚îÄ benchmarks/            # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ perf_benchmarks_test.dart
‚îÇ   ‚îî‚îÄ‚îÄ perf_report_test.dart
‚îÇ
‚îú‚îÄ‚îÄ helpers/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ test_database_helper.dart
‚îÇ
‚îî‚îÄ‚îÄ tools/                 # –¢–µ—Å—Ç—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏–º–ø–æ—Ä—Ç–∞
    ‚îî‚îÄ‚îÄ dictionary_importer_test.dart
```

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

#### Unit —Ç–µ—Å—Ç —Å–ª–æ—è

```dart
void main() {
  group('DictionaryLayer', () {
    late DictionaryLayer layer;
    late DictionaryRepository mockRepo;
    
    setUp(() {
      mockRepo = MockDictionaryRepository();
      layer = DictionaryLayer(dictionaryRepository: mockRepo);
    });
    
    test('should translate word successfully', () async {
      final context = TranslationContext(
        sourceLanguage: 'en',
        targetLanguage: 'ru',
      );
      
      when(mockRepo.getTranslation('hello', 'en-ru'))
          .thenAnswer((_) async => mockTranslation);
      
      final result = await layer.process('hello', context);
      
      expect(result.success, isTrue);
      expect(result.processedText, equals('–ø—Ä–∏–≤–µ—Ç'));
    });
  });
}
```

#### Integration —Ç–µ—Å—Ç

```dart
void main() {
  testWidgets('Full translation pipeline', (tester) async {
    final engine = TranslationEngine();
    await engine.initialize(
      customDatabasePath: './test_data',
    );
    
    final result = await engine.translate(
      'Hello world',
      sourceLanguage: 'en',
      targetLanguage: 'ru',
    );
    
    expect(result.hasError, isFalse);
    expect(result.translatedText, isNotEmpty);
    expect(result.confidence, greaterThan(0.0));
    
    await engine.dispose();
  });
}
```

### Mock –¥–∞–Ω–Ω—ã–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TestDatabaseHelper` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```dart
class TestDatabaseHelper {
  static Future<void> createTestData(String path) async {
    // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª–æ–≤–∞—Ä–µ–π/—Ñ—Ä–∞–∑
  }
  
  static Future<void> cleanupTestData(String path) async {
    // –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
  }
}
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

–ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:
```bash
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html
```

**–¶–µ–ª—å:** –º–∏–Ω–∏–º—É–º 70% –ø–æ–∫—Ä—ã—Ç–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

- **DEVELOPMENT_STAGES.md** - –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –¥–æ "–∏–¥–µ–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏"
- **core_audit_ru.md** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç —è–¥—Ä–∞ (—Ä–∏—Å–∫–∏, –ø—Ä–æ–±–ª–µ–º—ã, –±–ª–æ–∫–µ—Ä—ã)
- **core_changes_ru.md** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **cli_commands_ru.md** - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ CLI –∫–æ–º–∞–Ω–¥–∞–º
- **usage_ru.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **test_plan_ru.md** - –ø–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ–¥–∞

**Core:**
- `lib/src/core/translation_engine.dart` - –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –¥–≤–∏–∂–∫–∞
- `lib/src/core/translation_pipeline.dart` - –∫–æ–Ω–≤–µ–π–µ—Ä —Å–ª–æ—ë–≤
- `lib/src/core/translation_context.dart` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–æ–¥–∞

**Layers:**
- `lib/src/layers/base_translation_layer.dart` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å–ª–æ—è
- `lib/src/layers/pre_processing_layer.dart` - –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
- `lib/src/layers/phrase_translation_layer.dart` - —Ñ—Ä–∞–∑—ã
- `lib/src/layers/dictionary_layer.dart` - —Å–ª–æ–≤–∞—Ä—å
- `lib/src/layers/grammar_layer.dart` - –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞
- `lib/src/layers/word_order_layer.dart` - –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤
- `lib/src/layers/post_processing_layer.dart` - –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞

**Data:**
- `lib/src/data/base_repository.dart` - –±–∞–∑–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- `lib/src/data/dictionary_repository.dart` - —Å–ª–æ–≤–∞—Ä–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- `lib/src/data/phrase_repository.dart` - —Ñ—Ä–∞–∑–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**Utils:**
- `lib/src/utils/cache_manager.dart` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
- `lib/src/utils/debug_logger.dart` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `lib/src/utils/metrics.dart` - –º–µ—Ç—Ä–∏–∫–∏
- `lib/src/utils/tracing.dart` - —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

**CLI:**
- `bin/translate_engine.dart` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ CLI
- `bin/commands/` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **Repository**: https://github.com/VernaculusF/translation_engine
- **Issues**: https://github.com/VernaculusF/translation_engine/issues
- **Package**: https://pub.dev/packages/fluent_translate

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã:

- [x] –ü—Ä–æ—á–∏—Ç–∞–ª–∏ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [x] –û–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
- [x] –ü–æ–Ω–∏–º–∞–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
- [x] –ó–Ω–∞–µ—Ç–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [x] –ò–∑—É—á–∏–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [x] –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`flutter pub get`)
- [x] –ó–∞–ø—É—Å—Ç–∏–ª–∏ —Ç–µ—Å—Ç—ã (`flutter test`)
- [x] –ó–∞–ø—É—Å—Ç–∏–ª–∏ analyze (`flutter analyze`)

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- [ ] –ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç `flutter analyze` –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] CHANGELOG.md –¥–æ–ø–æ–ª–Ω–µ–Ω (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- [ ] –°–æ–±–ª—é–¥–µ–Ω—ã OOP –∏ SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] Unicode –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –≥–¥–µ –Ω—É–∂–Ω–æ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## ü§ñ –ü—Ä–∞–≤–∏–ª–∞ –î–õ–Ø –ò–ò

> –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–Ω—ã—Ö –ò–ò-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å translation_engine.

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã

#### 1. –í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `flutter analyze` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**‚ùó–ö–†–ò–¢–ò–ß–ù–û:** –ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∑–∞–ø—É—Å–∫–∞–π—Ç–µ:
```bash
flutter analyze
```

–ö–æ–¥ –î–û–õ–ñ–ï–ù –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.

#### 2. –ù–µ –Ω–∞—Ä—É—à–∞–π—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –∫–æ–¥–∞

- **OOP –ø—Ä–∏–Ω—Ü–∏–ø—ã**: —Å–æ–±–ª—é–¥–∞–π—Ç–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º
- **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã**: Single Responsibility, Open/Closed, Liskov Substitution, Interface Segregation, Dependency Inversion
- **–ù–µ –ª–æ–º–∞–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**: –Ω–µ –º–µ–Ω—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–ª–æ—ë–≤/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –±–µ–∑ —è–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

#### 3. –ò–∑—É—á–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

**–ü–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:**
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Ü–µ–ª–∏–∫–æ–º
2. –ù–∞–π–¥–∏—Ç–µ –∏ –∏–∑—É—á–∏—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–∏–º–ø–æ—Ä—Ç—ã, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- `read_any_files` –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–æ–¥–∞
- `grep` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- `find_files` –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `search_codebase` –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞

### –†–∞–±–æ—Ç–∞ —Å–æ —Å–ª–æ—è–º–∏ (Layers)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ—è

–í—Å–µ —Å–ª–æ–∏ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç `BaseTranslationLayer` –∏ **–î–û–õ–ñ–ù–´**:

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
   ```dart
   String get name;                    // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Å–ª–æ—è
   String get description;             // –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
   LayerPriority get priority;         // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   bool canHandle(String text, TranslationContext context);
   Future<LayerResult> process(String text, TranslationContext context);
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `processWithMetrics` –¥–ª—è –≤—ã–∑–æ–≤–∞:**
   - –°–ª–æ–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `LayerAdapter`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `processWithMetrics`
   - –ù–ï –≤—ã–∑—ã–≤–∞–π—Ç–µ `process` –Ω–∞–ø—Ä—è–º—É—é –∏–∑ pipeline

3. **–†–∞–±–æ—Ç–∞—Ç—å —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –∏–∑ PreProcessingLayer:**
   ```dart
   final tokens = context.getMetadata<List<TextToken>>('preprocessing_tokens');
   ```
   - –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏

4. **–í–æ–∑–≤—Ä–∞—â–∞—Ç—å LayerResult, –∞ –Ω–µ –±—Ä–æ—Å–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**
   ```dart
   // ‚ùå –ü–õ–û–•–û
   throw Exception('Something failed');
   
   // ‚úÖ –•–û–†–û–®–û
   return LayerResult.error(
     originalText: text,
     errorMessage: 'Something failed',
     debugInfo: _createDebugInfo(...),
   );
   ```

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–æ—ë–≤

**–ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–ª–æ—è:**
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –≤–µ—Å—å —Ñ–∞–π–ª —Å–ª–æ—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç—ã –≤ `test/layers/{layer_name}_test.dart`
3. –ù–∞–π–¥–∏—Ç–µ, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–æ–π —á–µ—Ä–µ–∑ `grep` –∏–ª–∏ `search_codebase`
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–ª–æ–º–∞—é—Ç pipeline

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `flutter analyze`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã —Å–ª–æ—è: `flutter test test/layers/{layer_name}_test.dart`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ e2e —Ç–µ—Å—Ç—ã: `flutter test test/e2e/`

### –†–∞–±–æ—Ç–∞ —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏ (Data Layer)

#### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö:**
   ```dart
   // ‚ùå –ü–õ–û–•–û: O(n¬≤)
   for (final item in items) {
     await repo.addTranslation(...);
   }
   
   // ‚úÖ –•–û–†–û–®–û: O(n)
   await repo.bulkUpsertTranslations(items);
   ```

2. **–ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å —á–µ—Ä–µ–∑ storage:**
   ```dart
   await storage.rewriteJsonLines(
     langPair,
     fileName,
     entries.map((e) => jsonEncode(e)).toList(),
     lock: true,  // –í–ê–ñ–ù–û: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
   );
   ```

3. **Unicode –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–ª—é—á–µ–π:**
   ```dart
   import 'package:unorm_dart/unorm_dart.dart' as unorm;
   
   final normalized = unorm.nfc(text.toLowerCase());
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CacheManager:**
   - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CacheManager` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
   - –ö–ª—é—á–∏ –∫—ç—à–∞: `'dict:{source}:{langPair}'` –∏–ª–∏ `'phrase:{source}:{langPair}'`

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ _applyConfig

–ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

1. **–î–æ–±–∞–≤—å—Ç–µ –≤ `EngineConfig`** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–∏–ø–∏–∑–∞—Ü–∏—é)
2. **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –≤ `_applyConfig`** –º–µ—Ç–æ–¥–∞ `TranslationEngine`:
   ```dart
   Future<void> _applyConfig(Map<String, dynamic> config) async {
     // –ü—Ä–∏–º–µ—Ä: –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
     if (config.containsKey('my_feature')) {
       final myConfig = config['my_feature'] as Map<String, dynamic>;
       // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
     }
   }
   ```

3. **–û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –≤ —Ä–∞–∑–¥–µ–ª–µ "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

**–î–ª—è —Å–ª–æ—ë–≤:**
```bash
# –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–ª–æ—è
flutter test test/layers/{layer_name}_test.dart

# E2E —Ç–µ—Å—Ç—ã
flutter test test/e2e/pipeline_e2e_test.dart
```

**–î–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:**
```bash
# Unit —Ç–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
flutter test test/unit/data/{repository_name}_test.dart

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
flutter test test/integration/
```

**–ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
flutter test

# Analyze
flutter analyze
```

#### –ù–∞–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã:

```dart
void main() {
  group('MyFeature', () {
    setUp(() {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    });
    
    test('should work correctly', () {
      // Arrange
      final input = 'test';
      
      // Act
      final result = myFeature(input);
      
      // Assert
      expect(result, isNotNull);
    });
  });
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –î–æ–±–∞–≤–ª—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

```dart
import '../utils/debug_logger.dart';

// –î–ª—è –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
DebugLogger.instance.info('operation.start', fields: {
  'trace_id': traceId,
  'param1': value1,
});

// –î–ª—è –æ—à–∏–±–æ–∫
DebugLogger.instance.error('operation.error', error: e, stackTrace: st, fields: {
  'trace_id': traceId,
  'context': 'additional info',
});

// –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
DebugLogger.instance.debug('operation.detail', fields: {
  'detail': 'some debug info',
});
```

#### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏

```dart
import '../utils/metrics.dart';

// –¢–∞–π–º–µ—Ä
final stopwatch = Stopwatch()..start();
// ... –æ–ø–µ—Ä–∞—Ü–∏—è ...
MetricsRegistry.instance.timer('my.operation').observe(stopwatch.elapsed);

// –°—á—ë—Ç—á–∏–∫
MetricsRegistry.instance.counter('my.events').inc();
```

### –ò–º–ø–æ—Ä—Ç –∏ —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

#### CSV –∏–º–ø–æ—Ä—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π CSV –ø–∞—Ä—Å–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∞–≤—ã—á–µ–∫:

```dart
// –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–≤—ã—á–µ–∫ –∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
final fields = _parseCSVLine(line, delimiter: '\t');
```

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞:
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–≤—ã—á–∫–∏ (`"field with, comma"`)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ (`"field with "" quotes"`)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ (`,`, `\t`)

#### JSONL –∏–º–ø–æ—Ä—Ç

```dart
// –ß–∏—Ç–∞—Ç—å –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
for (final line in lines) {
  if (line.trim().isEmpty) continue;
  
  try {
    final entry = jsonDecode(line) as Map<String, dynamic>;
    entries.add(entry);
  } catch (e) {
    // –°–æ–±–∏—Ä–∞—Ç—å –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç—á—ë—Ç–∞
    errors.add('Line $lineNum: $e');
  }
}

// Bulk –∑–∞–ø–∏—Å—å
await repo.bulkUpsertTranslations(entries);
```

### CLI –∫–æ–º–∞–Ω–¥—ã

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ CLI –∫–æ–º–∞–Ω–¥—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç `BaseCommand`:

```dart
class MyCommand extends BaseCommand {
  @override
  String get name => 'mycommand';
  
  @override
  String get description => 'Description of my command';
  
  @override
  Future<int> run(List<String> args) async {
    // –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    final parser = ArgParser();
    parser.addOption('param', abbr: 'p', help: 'Parameter');
    
    final results = parser.parse(args);
    
    // –õ–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã
    try {
      // ... —Ä–∞–±–æ—Ç–∞ ...
      print('Success!');
      return 0; // EX_OK
    } catch (e) {
      print('Error: $e');
      return 1; // EX_ERROR
    }
  }
}
```

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å

#### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**‚ùå –ü–õ–û–•–û:**
```dart
final words = text.split(' ');
final translated = words.map((w) => translate(w)).toList();
return translated.join(' '); // –ü–æ—Ç–µ—Ä—è–Ω–∞ –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è, whitespace
```

**‚úÖ –•–û–†–û–®–û:**
```dart
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –∏–∑ PreProcessingLayer
final tokens = context.getMetadata<List<TextToken>>('preprocessing_tokens');
// –ü–µ—Ä–µ–≤–æ–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ word —Ç–æ–∫–µ–Ω—ã, —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É
```

#### 2. –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏

**‚ùå –ü–õ–û–•–û:**
```dart
final file = File(path);
file.writeAsStringSync(data); // –ù–µ –∞—Ç–æ–º–∞—Ä–Ω–æ!
```

**‚úÖ –•–û–†–û–®–û:**
```dart
await storage.rewriteJsonLines(langPair, fileName, lines, lock: true);
```

#### 3. –ó–∞–±—ã—Ç–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è Unicode

**‚ùå –ü–õ–û–•–û:**
```dart
final key = text.toLowerCase(); // –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∏–∞–∫—Ä–∏—Ç–∏–∫–æ–π
```

**‚úÖ –•–û–†–û–®–û:**
```dart
final key = unorm.nfc(text.toLowerCase());
```

#### 4. –ë—Ä–æ—Å–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ —Å–ª–æ—è—Ö

**‚ùå –ü–õ–û–•–û:**
```dart
if (error) throw Exception('Error');
```

**‚úÖ –•–û–†–û–®–û:**
```dart
return LayerResult.error(
  originalText: text,
  errorMessage: 'Error description',
  debugInfo: _createDebugInfo(...),
);
```

### Workflow –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á

#### –ó–∞–¥–∞—á–∞: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ —Å–ª–æ–≤–∞—Ä—å

1. **–ò–∑—É—á–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
   ```bash
   # –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ DictionaryRepository
   read_any_files: lib/src/data/dictionary_repository.dart
   ```

2. **–ò–∑–º–µ–Ω–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSONL –∑–∞–ø–∏—Å–∏:**
   - –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ –≤ –º–µ—Ç–æ–¥—ã `getTranslation`, `bulkUpsertTranslations`
   - –û–±–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä—Å–∏–Ω–≥ JSON

3. **–û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç—ã:**
   - `test/unit/data/dictionary_repository_test.dart`

4. **–û–±–Ω–æ–≤–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ë—Ä—ã:**
   - `lib/src/tools/dictionary_importer.dart`

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   ```bash
   flutter analyze
   flutter test test/unit/data/dictionary_repository_test.dart
   ```

6. **–û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - –†–∞–∑–¥–µ–ª "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö" –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ

#### –ó–∞–¥–∞—á–∞: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ –≤ —Å–ª–æ–µ

1. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:**
   - –°–æ–∑–¥–∞–π—Ç–µ/–Ω–∞–π–¥–∏—Ç–µ —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞–¥–∞–µ—Ç

2. **–ò–∑—É—á–∏—Ç–µ –∫–æ–¥ —Å–ª–æ—è:**
   ```bash
   read_any_files: lib/src/layers/{layer_name}.dart
   ```

3. **–ù–∞–π–¥–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏, –¥–µ–±–∞–≥
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

4. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ:**
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   ```bash
   flutter analyze
   flutter test test/layers/{layer_name}_test.dart
   flutter test test/e2e/
   ```

6. **–û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç—ã:**
   - –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç –¥–ª—è —ç—Ç–æ–≥–æ –±–∞–≥–∞ (regression test)

#### –ó–∞–¥–∞—á–∞: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä—É–π—Ç–µ:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–Ω—á–º–∞—Ä–∫–∏: `test/benchmarks/`
   - –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ `CacheManager`?
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã –ª–∏ –∫–ª—é—á–∏ –∫—ç—à–∞?

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ I/O:**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏?
   - –ï—Å—Ç—å –ª–∏ –ª–∏—à–Ω–∏–µ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏?

4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ:**
   - –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à
   - –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ I/O

5. **–ò–∑–º–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```bash
   flutter test test/benchmarks/perf_benchmarks_test.dart
   ```

### –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –ª—é–±–æ–π –∑–∞–¥–∞—á–∏:**

- [ ] ‚úÖ `flutter analyze` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏
- [ ] ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç: `flutter test`
- [ ] ‚úÖ –ù–µ –Ω–∞—Ä—É—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (OOP, SOLID)
- [ ] ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã bulk-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏
- [ ] ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ Unicode –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≥–¥–µ –Ω—É–∂–Ω–æ
- [ ] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] ‚úÖ –ö–æ–¥ —á–∏—Ç–∞–µ–º –∏ –ø–æ–Ω—è—Ç–µ–Ω

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ

1. **–ù–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
2. **–°–æ–±–ª—é–¥–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** - –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥
3. **–ü–æ–∫—Ä—ã–≤–∞—Ç—å —Ç–µ—Å—Ç–∞–º–∏** - –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** - –ø–æ–º–æ—á—å –±—É–¥—É—â–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å** - —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ**
